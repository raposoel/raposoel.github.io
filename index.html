<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Raposo EL RPG</title>

  <!-- Favicon (logo na aba) -->
  <link rel="icon" type="image/png" href="raposo-1.webp">

  <!-- Estilos básicos -->
  <style>
    body { font-family: Arial, sans-serif; background: #1e1e2f; color: #f5f5f5; text-align: center; }
    header { padding: 20px; background: #2a2a40; }
    .agenda { max-width: 600px; margin: 40px auto; text-align: left; background: #2e2e44; padding: 20px; border-radius: 10px; }
    .sessao { margin-bottom: 15px; padding: 10px; border: 1px solid #444; border-radius: 6px; background: #3a3a55; }
    .whatsapp-btn { display: inline-block; margin-top: 20px; padding: 12px 18px; background: #25D366; color: white; font-weight: bold; border-radius: 8px; text-decoration: none; font-size: 1.1rem; }
    .whatsapp-btn:hover { background: #1da851; }
  </style>
</head>
<body>
  <header>
    <!-- Troque "logo.png" pela imagem do seu logo -->
    <img src="raposo-1.webp" alt="Raposo EL">
    <h1>Mesas</h1>
        <!-- Botão WhatsApp -->
    <a class="whatsapp-btn" href="https://wa.me/5512992303459?text=Olá. Quero jogar RPG com você." target="_blank">
      Chama no WhatsApp
       </a>
  </header>

 <section class="agenda" id="agenda"></section>
  <script>
    const sistemas = {
      "Tormenta20": [
        { nome: "Guerra Artoniana", data: "2025-08-20", freq: "semanal", vagas: 2 },
        { nome: "Guerra Artoniana", data: "2025-08-22", freq: "semanal", vagas: 2 },
        { nome: "Libertação de Valkaria", data: "2025-08-21", freq: "quinzenal", vagas: 0 }
      ],
      "Daggerheart": [
        { nome: "A G O U R O (Era da Umbra)", data: "2025-08-23", freq: "quinzenal", vagas: 1 },
        { nome: "GAMBiARRA (Placa-Mãe)", data: "2025-08-26", freq: "quinzenal", vagas: 1 }
      ]
    };

    function calcularProximaSessao(dataInicial, freq) {
      let hoje = new Date();
      let proxima = new Date(dataInicial);
      let dias = (freq === "semanal") ? 7 : 14;

      while (proxima < hoje) {
        proxima.setDate(proxima.getDate() + dias);
      }
      return proxima;
    }

    function formatarData(data) {
      return data.toLocaleDateString("pt-BR", { weekday: "long", day: "2-digit", month: "2-digit", year: "2-digit" });
    }

    function renderizarAgenda() {
      let agendaDiv = document.getElementById("agenda");
      agendaDiv.innerHTML = "<h2>Próximas Sessões</h2>";

      // percorre sistemas
      for (let sistema in sistemas) {
        agendaDiv.innerHTML += `<div class="sistema"><h2>${sistema}</h2>`;

        // percorre mesas de cada sistema
        sistemas[sistema].forEach(mesa => {
          let proximaData = calcularProximaSessao(mesa.data, mesa.freq);
          agendaDiv.innerHTML += `
            <div class="sessao">
              <h3>${mesa.nome}</h3>
              <p><strong>Próxima Sessão:</strong> ${formatarData(proximaData)}</p>
              <p><strong>Frequência:</strong> ${mesa.freq}</p>
              <p><strong>Vagas:</strong> ${mesa.vagas} disponíveis</p>
            </div>
          `;
        });

        agendaDiv.innerHTML += `</div>`;
      }
    }

    renderizarAgenda();
  </script>
    </a>
  </section>
</body>
</html>
