<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Raposo EL RPG</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="raposo-1.webp">

  <!-- Ícones do Font Awesome (para WhatsApp e sol/lua) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    /* Paleta via variáveis (claro) */
    :root{
      --bg: #ffffff;
      --text: #000000;
      --header-bg: #f0f0f0;  /* Fundo claro para o header */
      --header-text: #000000; /* Texto escuro para contrastar */

      --agenda-bg: #f2f2f2;
      --sistema-border: #cccccc;
      --sistema-header-bg: #dddddd;
      --sistema-header-hover: #cccccc;
      --sistema-content-bg: #f7f7f7;

      --sessao-bg: #eaeaea;
      --sessao-border: #bbbbbb;

      --footer-bg: #f0f0f0;   /* Fundo claro para o footer */
      --footer-text: #000000; /* Texto escuro para contrastar */

      --whatsapp: #075E54;        /* verde escuro */
      --whatsapp-hover: #064c44;
      --toggle-bg: #e0e0e0;
      --toggle-text: #000000;
    }

    /* Tema escuro (sobrescreve) */
    body.dark{
      --bg: #0e0e12;
      --text: #f5f5f5;
      --header-bg: #0b0b0e;   /* Mantém o escuro original */
      --header-text: #ffffff;  /* Mantém o claro original */

      --agenda-bg: #15151b;
      --sistema-border: #2a2a2f;
      --sistema-header-bg: #1b1b22;
      --sistema-header-hover: #23232b;
      --sistema-content-bg: #171721;

      --sessao-bg: #1e1e29;
      --sessao-border: #30303a;

      --footer-bg: #0b0b0e;   /* Mantém o escuro original */
      --footer-text: #ffffff;  /* Mantém o claro original */

      --whatsapp: #0c5b50;        /* mantém escuro no dark */
      --whatsapp-hover: #0a4a41;
      --toggle-bg: #2a2a2f;
      --toggle-text: #f5f5f5;
    }

    /* Base */
    body { font-family: Arial, sans-serif; background: var(--bg); color: var(--text); text-align: center; margin: 0; transition: background .25s, color .25s; }
    header { padding: 20px; background: var(--header-bg); color: var(--header-text); }
    header img { max-height: 80px; }
    h1 { margin-top: 20px; }

    .agenda { max-width: 800px; margin: 40px auto; text-align: left; background: var(--agenda-bg); padding: 20px; border-radius: 10px; }
    .sistema { margin-bottom: 20px; border: 1px solid var(--sistema-border); border-radius: 6px; background: var(--sistema-content-bg); }
    .sistema-header { cursor: pointer; padding: 12px; font-weight: bold; background: var(--sistema-header-bg); display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--sistema-border); }
    .sistema-header:hover { background: var(--sistema-header-hover); }
    .sistema-conteudo { display: none; padding: 15px; }

    .sessao { margin-bottom: 15px; padding: 10px; border: 1px solid var(--sessao-border); border-radius: 6px; background: var(--sessao-bg); }
    .sessao h3 { margin: 0 0 5px; }

    .whatsapp-btn { display: inline-block; margin-top: 16px; padding: 12px 18px; background: var(--whatsapp); color: #fff; font-weight: bold; border-radius: 8px; text-decoration: none; font-size: 1.05rem; transition: background .2s; }
    .whatsapp-btn i { margin-right: 8px; }
    .whatsapp-btn:hover { background: var(--whatsapp-hover); }

    .theme-toggle { margin-left: 12px; padding: 10px 14px; border: none; border-radius: 8px; background: var(--toggle-bg); color: var(--toggle-text); font-weight: bold; cursor: pointer; transition: opacity .2s; }
    .theme-toggle:hover { opacity: .9; }

    .feedbacks { margin: 40px auto; max-width: 600px; font-style: italic; font-size: 1.1rem; }
    .footer { margin-top: 40px; padding: 15px; background: var(--footer-bg); color: var(--footer-text); font-size: 0.9rem; }
    .theme-toggle { width: 40px; height: 40px;  border-radius: 50%;  display: flex;  align-items: center;  justify-content: center;  margin-left: 12px;
  </style>
</head>
<body>
  <header>
    <img src="raposo-1.webp" alt="Raposo EL"><br>
    <a class="whatsapp-btn" href="https://wa.me/5512992303459?text=Olá. Quero jogar RPG com você." target="_blank">
      <i class="fab fa-whatsapp"></i> Chama
    </a>
<button class="theme-toggle" id="themeToggle" type="button" aria-label="Alternar tema">
  <i id="themeIcon" class="fas fa-moon"></i>
</button>
  </header>

  <h1>Mesas</h1>
  <section class="agenda" id="agenda"></section>

  <div class="feedbacks">
    <p id="feedback"></p>
  </div>

  <div class="footer">
    <p>&copy; 2025 Raposo EL RPG. Todos os direitos reservados.</p>
  </div>

  <script>
    /* ===== Tema claro/escuro ===== */
function aplicarTema(tema){
  const isDark = (tema === 'dark');
  document.body.classList.toggle('dark', isDark);
  localStorage.setItem('tema', tema);
      const icon = document.getElementById('themeIcon');
  const icon = document.getElementById('themeIcon');
  if(isDark){
    icon.className = 'fas fa-sun';
  }else{
    icon.className = 'fas fa-moon';
      }
   const headerImg = document.querySelector('header img');
  if (headerImg) {
    headerImg.src = isDark ? 'raposo-1.webp' : 'raposo-2.webp';
  }
    }

    function toggleTheme(){
      aplicarTema(document.body.classList.contains('dark') ? 'light' : 'dark');
    }

    function initTheme(){
      const salvo = localStorage.getItem('tema');
      if(salvo){
        aplicarTema(salvo);
      }else{
        const prefereEscuro = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        aplicarTema(prefereEscuro ? 'dark' : 'light');
      }
      document.getElementById('themeToggle').addEventListener('click', toggleTheme);
    }

    /* ===== Dados / Agenda ===== */
    const sistemas = {
      "Tormenta20": [
        { nome: "Guerra Artoniana", data: "2025-08-20", hora: "19h30~23h30", freq: "semanal", vagas: 2 },
        { nome: "Guerra Artoniana", data: "2025-08-22", hora: "20h~00h", freq: "semanal", vagas: 2 },
        { nome: "Guerra Artoniana", data: "2025-08-28", hora: "20h~00h", freq: "quinzenal", vagas: 1 },
        { nome: "Libertação de Valkaria", data: "2025-08-19", hora: "21h~00h", freq: "quinzenal", vagas: 2 },
        { nome: "Libertação de Valkaria", data: "2025-08-21", hora: "20h~23h", freq: "quinzenal", vagas: 0 },
        { nome: "Libertação de Valkaria", data: "2025-08-24", hora: "20h~23h", freq: "quinzenal", vagas: 1 }
      ],
      "Daggerheart": [
        { nome: "A G O U R O (Era da Umbra)", data: "2025-08-23", hora: "20h~23h30", freq: "quinzenal", vagas: 1 },
        { nome: "GAMBiARRA (Placa-Mãe)", data: "2025-08-26", hora: "20h~23h30", freq: "quinzenal", vagas: 1 }
      ]
    };

    function calcularProximaSessao(dataInicial, freq) {
      let hoje = new Date();
      let proxima = new Date(dataInicial);
      const dias = (freq === "semanal") ? 7 : 14;
      while (proxima < hoje) {
        proxima.setDate(proxima.getDate() + dias);
      }
      return proxima;
    }

    function formatarData(data) {
      return data.toLocaleDateString("pt-BR", { weekday: "long", day: "2-digit", month: "2-digit", year: "2-digit" });
    }

    function renderizarAgenda() {
      const agendaDiv = document.getElementById("agenda");
      agendaDiv.innerHTML = "";

      for (let sistema in sistemas) {
        const id = sistema.replace(/\s+/g, "_");
        agendaDiv.innerHTML += `
          <div class="sistema">
            <div class="sistema-header" onclick="toggleSistema('${id}')">
              <span><h2>${sistema}</h2></span>
              <i id="icon-${id}" class="fas fa-chevron-right"></i>
            </div>
            <div id="${id}" class="sistema-conteudo"></div>
          </div>
        `;

        let conteudo = "";
        sistemas[sistema].forEach(mesa => {
          const proximaData = calcularProximaSessao(mesa.data, mesa.freq);
          conteudo += `
            <div class="sessao">
              <h3>${mesa.nome}</h3>
              <p><strong>Próxima Sessão:</strong> ${formatarData(proximaData)} às ${mesa.hora}</p>
              <p><strong>Frequência:</strong> ${mesa.freq}</p>
              <p><strong>Vagas:</strong> ${mesa.vagas} disponíveis</p>
            </div>
          `;
        });
        
        // Aguarda o DOM ser atualizado antes de acessar o elemento
        setTimeout(() => {
          const elemento = document.getElementById(id);
          if (elemento) {
            elemento.innerHTML = conteudo;
          }
        }, 0);
      }
    }

    // Define a função no escopo global
    window.toggleSistema = function(id) {
      const conteudo = document.getElementById(id);
      const icone = document.getElementById("icon-" + id);
      if (conteudo.style.display === "block") {
        conteudo.style.display = "none";
        icone.classList.remove("fa-chevron-down");
        icone.classList.add("fa-chevron-right");
      } else {
        conteudo.style.display = "block";
        icone.classList.remove("fa-chevron-right");
        icone.classList.add("fa-chevron-down");
      }
    }

    // Feedbacks rotativos (CORRIGIDO - vírgulas adicionadas)
    const feedbacks = [
      "“Mó divertido esse negócio, vlw!”<br>— Guilherme",
      "“Agora tô entendendo pq a galera vivi nesse negócio kkk.”<br>— Guilherme, <i>Poatan</i>",
      "“Tô impressionado com teu profissionalismo. Eu confesso que torcia o nariz com <i>mesa paga</i>, mas mordi a lingua bonito pq estou gostando demais da maneira como tu trabalha.”<br>— Lucas, <i>Karyssa & Sasskya</i>",
      "“Melhor mesa que joguei até agora. Parabéns pelo nivel de comprometimento e qualidade.”<br>— Allison, <i>Veldora</i>",
      "“Valeu pela sessão, combate realmente desafiante. A mesa esta massa, desde que vim pros mestre pago não encontrava [algo assim].”<br>— Eduardo, <i>Dagol</i>",
      "“Você vai curtir o sistema é muito bom e o mestre é sensacional, não tem erro!”<br>— Brenno, <i>sobre Daggerheart</i>",
      "“Eu curti vc narra legal, faz todos [participarem] de boas.”<br>— Diogo, <i>Inki</i>",
      "“Já jogo com ele em duas mesas. O cara é fera mesmo.”<br>— Cleo, <i>vários</i>",
      "“Te agradecer ontem pela sessão. Tu é um bom narrador. Me diverti bastante.”<br>— Adam, <i>após quickstart de Daggerheart</i>"
    ];

    let index = 0;
    function mostrarFeedback() {
      document.getElementById("feedback").innerHTML = feedbacks[index];
      index = (index + 1) % feedbacks.length;
    }

    // Inicializa tudo quando o DOM estiver carregado
    document.addEventListener('DOMContentLoaded', function() {
      initTheme();
      renderizarAgenda();
      mostrarFeedback();
      setInterval(mostrarFeedback, 10000);
    });
  </script>
</body>
</html>
